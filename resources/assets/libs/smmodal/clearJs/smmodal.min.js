"use strict";function _instanceof(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function _classCallCheck(e,t){if(!_instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}var overModal=[],SmModal=function(){function S(e){var t=this;_classCallCheck(this,S);var o=".modal-close",l=500,i="smFade",s="smFade",r="ease",a=!1,n="header, main, footer",c="5px",d="background-color: rgba(0, 0, 0, 0.7)",h=!0,m=!0;this.beforeOpenVar=!1,this.afterOpenVar=!1,this.beforeCloseVar=!1,this.afterCloseVar=!1,this.modalSelector=document.querySelector(e.modalSelector),this.closeSelector=e.closeSelector,this.modalSpeed=e.modalSpeed,this.openAnimate=e.openAnimate,this.closeAnimate=e.closeAnimate,this.transitionTimingFunction=e.transitionTimingFunction,this.beforeOpen=e.beforeOpen,this.afterOpen=e.afterOpen,this.beforeClose=e.beforeClose,this.afterClose=e.afterClose,this.currentPadding=parseInt(window.getComputedStyle(this.modalSelector.querySelectorAll(".sm-modal-body")[0])["padding-top"].replace("px","")),this.backgroundBlur=e.backgroundBlur,this.backgroundBlurEl=e.backgroundBlurEl,this.backgroundBlurValue=e.backgroundBlurValue,this.overlay=e.overlay,this.verticalCenter=e.verticalCenter,this.closeEsc=e.closeEsc,this.sideModal=e.sideModal,void 0===this.closeSelector&&(this.closeSelector=o),void 0===this.modalSpeed&&(this.modalSpeed=l),void 0===this.openAnimate&&(this.openAnimate=i),void 0===this.closeAnimate&&(this.closeAnimate=s),void 0===this.transitionTimingFunction&&(this.transitionTimingFunction=r),void 0===this.backgroundBlur&&(this.backgroundBlur=a),void 0===this.backgroundBlurEl&&(this.backgroundBlurEl=n),void 0===this.backgroundBlurValue&&(this.backgroundBlurValue=c),void 0===this.overlay&&(this.overlay=d),void 0===this.verticalCenter&&(this.verticalCenter=h),void 0===this.closeEsc&&(this.closeEsc=m),"left"===this.sideModal?this.modalSelector.classList.add("leftModal"):"right"===this.sideModal&&this.modalSelector.classList.add("rightModal"),!1===this.verticalCenter&&(this.modalSelector.querySelectorAll(".sm-modal-wrap")[0].style.alignItems="flex-start"),this.modalSelector.querySelectorAll(".sm-modal-body")[0].setAttribute("style",this.overlay),this.modalSelector.style.transition="all 0s "+this.transitionTimingFunction,this.modalSelector.querySelectorAll(".sm-modal-contant")[0].style.transition="all 0s "+this.transitionTimingFunction,this.modalSelector.classList.remove(this.closeAnimate),this.modalSelector.classList.add(this.openAnimate),!0===this.closeEsc&&document.addEventListener("keyup",function(e){27===e.keyCode&&t.modalSelector.classList.contains("active")&&t.closeModal()}),this.modalSelector.removeEventListener("click",function(){}),this.modalSelector.addEventListener("click",function(e){t.modalBody=t.modalSelector.querySelectorAll(".sm-modal-body")[0],t.modalWrap=t.modalSelector.querySelectorAll(".sm-modal-wrap")[0],t.modalBody!=e.target&&t.modalWrap!=e.target||t.closeModal()});for(var u=0;u<this.modalSelector.querySelectorAll(this.closeSelector).length;u++)this.modalSelector.querySelectorAll(this.closeSelector)[u].removeEventListener("click",function(){}),this.modalSelector.querySelectorAll(this.closeSelector)[u].addEventListener("click",function(){t.closeModal()})}return _createClass(S,[{key:"openModal",value:function(){var e=this;if(void 0!==this.beforeOpen&&this.beforeOpen(),0===overModal.length?this.modalSelector.style.cssText+="z-index: 5000;":this.modalSelector.style.cssText+="z-index: "+(parseInt(overModal[overModal.length-1])+1)+";",this.modalSelector.querySelectorAll(".sm-modal-wrap")[0].scrollIntoView({block:"start"}),!0===this.verticalCenter&&this.fixCenterOnIE(),!0===this.backgroundBlur)for(var t=0;t<document.querySelectorAll(this.backgroundBlurEl).length;t++)document.querySelectorAll(this.backgroundBlurEl)[t].style.cssText+="filter: blur("+this.backgroundBlurValue+");";this.modalSelector.style.cssText+="transition: all "+this.modalSpeed+"ms "+this.transitionTimingFunction+";",this.modalSelector.querySelectorAll(".sm-modal-contant")[0].style.cssText="transition: all "+this.modalSpeed+"ms "+this.transitionTimingFunction+";",this.modalSelector.classList.remove(this.openAnimate),this.modalSelector.classList.add("active"),0===overModal.length&&(document.querySelector("body").style.cssText="overflow: hidden; padding-right: "+scrollbarWidth()+"px;"),overModal.push(window.getComputedStyle(this.modalSelector)["z-index"]),setTimeout(function(){void 0!==e.afterOpen&&e.afterOpen()},this.modalSpeed)}},{key:"closeModal",value:function(){var e=this;if(void 0!==this.beforeClose&&this.beforeClose(),overModal.pop(),!0===this.backgroundBlur)for(var t=0;t<document.querySelectorAll(this.backgroundBlurEl).length;t++)document.querySelectorAll(this.backgroundBlurEl)[t].style.cssText="filter: blur(0px);";this.modalSelector.classList.remove(this.openAnimate),this.modalSelector.classList.add(this.closeAnimate),this.modalSelector.classList.remove("active"),setTimeout(function(){0===overModal.length&&document.querySelector("body").removeAttribute("style"),e.modalSelector.style.cssText="transition: all 0s "+e.transitionTimingFunction+";",e.modalSelector.querySelectorAll(".sm-modal-contant")[0].style.cssText="transition: all 0s "+e.transitionTimingFunction+";",e.modalSelector.classList.remove(e.closeAnimate),e.modalSelector.classList.add(e.openAnimate),void 0!==e.afterClose&&e.afterClose()},this.modalSpeed)}},{key:"fixCenterOnIE",value:function(){var e=window.navigator.userAgent.toLowerCase();if(1==(/trident/gi.test(e)||/msie/gi.test(e))){var t=(window.innerHeight-this.modalSelector.querySelectorAll(".sm-modal-contant")[0].offsetHeight)/2;this.currentPadding<t?this.modalSelector.querySelectorAll(".sm-modal-body")[0].style.cssText+="padding: "+t+"px 0px;":this.modalSelector.querySelectorAll(".sm-modal-contant")[0].style.cssText+="margin-bottom: "+this.currentPadding+"px;"}}}]),S}();function scrollbarWidth(){var e=parseInt(document.documentElement.clientWidth);return parseInt(window.innerWidth)-e}